(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["newsAdd"],{"1dde":function(t,e,i){var n=i("d039"),r=i("b622"),s=i("2d00"),a=r("species");t.exports=function(t){return s>=51||!n((function(){var e=[],i=e.constructor={};return i[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"2eec":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"public"},[i("header-content"),i("div",{staticClass:"public-content"},[i("left",{attrs:{curid:t.curid,isPull:t.isPull},on:{pull:t.pull}}),i("div",{staticClass:"right"},[i("div",{staticClass:"right-content"},[i("div",{staticClass:"title"},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-shouye"}})]),i("p",[t._v(" 你现在所在的位置是: "),i("span",[i("router-link",{attrs:{to:"/news"}},[t._v("新闻管理")])],1),t._v(" / "),i("span",[t._v(t._s(t.title))])])]),i("div",{staticClass:"info"},[i("el-form",{ref:"info",staticClass:"pro-info",attrs:{model:t.info,rules:t.rules,"label-width":"180px"}},[i("el-form-item",{attrs:{label:"新闻标题：",prop:"name"}},[i("el-input",{model:{value:t.info.name,callback:function(e){t.$set(t.info,"name",e)},expression:"info.name"}})],1),i("el-form-item",{attrs:{label:"新闻封面：",prop:"img"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{name:"imgfile",action:t.RespondURL.url+"Goodsparticulars/uploadimg","show-file-list":!1,"on-success":t.handleAvatarSuccess}},[t.imageUrl?i("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),t.imageUrl?i("div",{staticClass:"delImg",on:{click:function(e){e.stopPropagation(),t.imageUrl="",t.info.img=""}}},[i("i",{staticClass:"el-icon-circle-close"})]):t._e(),t.imageUrl?i("div",{staticClass:"revise"},[t._v(" 替换 "),i("i",{staticClass:"el-icon-copy-document"})]):t._e()])],1),i("el-form-item",{attrs:{label:"作者：",prop:"writer"}},[i("el-input",{model:{value:t.info.writer,callback:function(e){t.$set(t.info,"writer",e)},expression:"info.writer"}})],1),i("el-form-item",{attrs:{label:"新闻来源：",prop:"source"}},[i("el-input",{model:{value:t.info.source,callback:function(e){t.$set(t.info,"source",e)},expression:"info.source"}})],1),i("el-form-item",{attrs:{label:"发布时间: ",prop:"time"}},[i("el-date-picker",{attrs:{type:"date",placeholder:"发布时间"},on:{change:t.dateChange},model:{value:t.info.time,callback:function(e){t.$set(t.info,"time",e)},expression:"info.time"}})],1),i("el-form-item",{staticClass:"content",attrs:{label:"新闻内容",prop:"content"}},[i("div",{staticClass:"insert"},[i("el-upload",{staticClass:"insert-uploader",attrs:{name:"imgfile",action:t.RespondURL.url+"Goodsparticulars/uploadimg","show-file-list":!1,"on-success":t.getImg}},[i("el-button",{attrs:{type:"primary"}},[i("i",{staticClass:"el-icon-picture"})])],1)],1),i("div",{ref:"content",staticClass:"edit",attrs:{contenteditable:"true"},on:{blur:t.getContent}})])],1),i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("立即发送")]),i("el-button",{on:{click:function(e){return t.resetForm("info")}}},[t._v("取消重置")])],1)],1)])])],1)],1)},r=[],s=(i("99af"),i("b592")),a=i("adc7"),o={name:"NewsAdd",components:{Left:a["a"],HeaderContent:s["a"]},created:function(){var t=this;if(this.$route.query.id){this.title="新闻修改";var e=this.$route.query.id;this.id=e,this.$ajax.get(this.RespondURL.url+"JournalismContent/findById/"+e).then((function(e){t.info=e.data.result,t.$refs.content.innerHTML=e.data.result.content,t.imageUrl=t.RespondURL.url+e.data.result.img}))}else this.title="添加新闻"},data:function(){return{curid:"1",title:"",id:"",info:{name:"",time:"",content:"",source:"",writer:"",img:""},rules:{name:[{required:!0,message:"请输入新闻标题",trigger:"blur"}],time:[{required:!0,message:"请输入发布时间",trigger:"blur"}],writer:[{required:!0,message:"请输入作者",trigger:"blur"}]},imageUrl:"",isPull:!1}},methods:{pull:function(){this.isPull?this.isPull=!1:this.isPull=!0},addHTML:function(t){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount){var i=e.getRangeAt(0);i.deleteContents();var n=document.createElement("div");n.innerHTML=t;var r,s,a=document.createDocumentFragment();while(r=n.firstChild)s=a.appendChild(r);i.insertNode(a),s&&(i=i.cloneRange(),i.setStartAfter(s),i.collapse(!0),e.removeAllRanges(),e.addRange(i))}},getContent:function(){this.info.content=this.$refs.content.innerHTML},getImg:function(t){var e='<div><img src="'.concat(this.RespondURL.url).concat(t.result,'" alt=""></div>');this.addHTML(e)},handleAvatarSuccess:function(t){this.imageUrl=this.RespondURL.url+t.result,this.info.img=t.result},dateChange:function(t){var e=this.$moment(t).format("YYYY-MM-DD");this.info.time=e},submitForm:function(){var t=this;this.$refs.info.validate((function(e){if(!e)return t.$alert("发送失败，请内容填写完整","提示",{confirmButtonText:"确定",callback:function(){}}),!1;var i="";""==t.id?i=t.RespondURL.url+"JournalismContent/insertjournalismcontent":(t.info.id=t.id[0],i=t.RespondURL.url+"JournalismContent/updatejournalismcontent"),t.$ajax.post(i,t.info).then((function(e){t.$alert(e.data.describe,"提示",{confirmButtonText:"确定",callback:function(){t.$router.push("/news")}})}))}))},resetForm:function(){this.info={name:"",time:"",content:"",source:"",writer:"",img:""},this.$refs.content.innerHTML="",this.imageUrl=""}}},l=o,c=(i("4983"),i("2877")),u=Object(c["a"])(l,n,r,!1,null,null,null);e["default"]=u.exports},4983:function(t,e,i){"use strict";i("a689")},"65f0":function(t,e,i){var n=i("861d"),r=i("e8b5"),s=i("b622"),a=s("species");t.exports=function(t,e){var i;return r(t)&&(i=t.constructor,"function"!=typeof i||i!==Array&&!r(i.prototype)?n(i)&&(i=i[a],null===i&&(i=void 0)):i=void 0),new(void 0===i?Array:i)(0===e?0:e)}},8418:function(t,e,i){"use strict";var n=i("c04e"),r=i("9bf2"),s=i("5c6c");t.exports=function(t,e,i){var a=n(e);a in t?r.f(t,a,s(0,i)):t[a]=i}},"99af":function(t,e,i){"use strict";var n=i("23e7"),r=i("d039"),s=i("e8b5"),a=i("861d"),o=i("7b0b"),l=i("50c4"),c=i("8418"),u=i("65f0"),d=i("1dde"),f=i("b622"),m=i("2d00"),p=f("isConcatSpreadable"),h=9007199254740991,v="Maximum allowed index exceeded",g=m>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),b=d("concat"),C=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:s(t)},k=!g||!b;n({target:"Array",proto:!0,forced:k},{concat:function(t){var e,i,n,r,s,a=o(this),d=u(a,0),f=0;for(e=-1,n=arguments.length;e<n;e++)if(s=-1===e?a:arguments[e],C(s)){if(r=l(s.length),f+r>h)throw TypeError(v);for(i=0;i<r;i++,f++)i in s&&c(d,f,s[i])}else{if(f>=h)throw TypeError(v);c(d,f++,s)}return d.length=f,d}})},a689:function(t,e,i){},adc7:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"left"},[i("ul",[t._l(t.leftArr,(function(e,n){return i("li",{key:e.id,class:{active:n==t.curid}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":e.img}})]),i("router-link",{attrs:{to:e.url}},[t._v(t._s(e.name))])],1)})),i("li",{class:{active:6==t.curid},on:{click:t.pull}},[i("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#icon-banner"}})]),i("div",{staticClass:"pull-btn"},[t._v("轮播图管理")]),i("i",{staticClass:"el-icon-caret-bottom",class:{pull:t.isPull}}),t.visible?i("div",{staticClass:"other",class:{changeHeight:t.isPull}},[i("p",{on:{click:function(e){return e.stopPropagation(),t.changeClassify(1)}}},[t._v("首页轮播")]),i("p",{on:{click:function(e){return e.stopPropagation(),t.changeClassify(2)}}},[t._v("产品轮播")])]):i("div",{staticClass:"other",class:{changeHeight:t.isPull}},[i("router-link",{attrs:{to:{path:"/banner",query:{id:1}}}},[t._v("首页轮播")]),i("router-link",{attrs:{to:{path:"/banner",query:{id:2}}}},[t._v("产品轮播")])],1)])],2)])},r=[],s={name:"Left",data:function(){return{leftArr:[{name:"产品管理",img:"#icon-chanpin1",num:"0",url:"/product"},{name:"新闻管理",img:"#icon-xinwen",num:"1",url:"/news"},{name:"专利管理",img:"#icon-zhuanli",num:"2",url:"/patent"},{name:"荣誉管理",img:"#icon-rongyu",num:"3",url:"/honor"},{name:"活动管理",img:"#icon-huodong",num:"4",url:"/activity"}]}},props:["curid","isPull","visible"],methods:{pull:function(){this.$emit("pull")},changeClassify:function(t){this.$emit("change",t)}}},a=s,o=i("2877"),l=Object(o["a"])(a,n,r,!1,null,null,null);e["a"]=l.exports},b592:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"header"},[i("p",[t._v("人信官网管理系统")]),i("div",{staticClass:"header-right"},[i("ul",[i("li",{on:{click:t.reset}},[i("i",{staticClass:"el-icon-refresh"}),i("span",[t._v("刷新")])]),i("li",{on:{click:t.toLogin}},[i("i",{staticClass:"el-icon-refresh-left"}),i("span",[t._v("注销")])])])])])},r=[],s={name:"HeaderContent",data:function(){return{}},props:[],methods:{reset:function(){this.$router.go(0)},toLogin:function(){sessionStorage.removeItem("cookie"),this.setCookie("mycookid"," ",-1),this.$router.push("/")},setCookie:function(t,e,i){if(0!==i){var n=24*i*60*60*1e3,r=new Date(+new Date+n);document.cookie=t+"="+e+";expires="+r.toUTCString()+"; domain=192.168.10.75; path=/"}else document.cookie=t+"="+e}}},a=s,o=i("2877"),l=Object(o["a"])(a,n,r,!1,null,null,null);e["a"]=l.exports},e8b5:function(t,e,i){var n=i("c6b6");t.exports=Array.isArray||function(t){return"Array"==n(t)}}}]);
//# sourceMappingURL=newsAdd.0110704e.js.map